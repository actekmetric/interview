# Backend deployment layout

This directory contains deployment assets for the backend service. The initial focus is a local developer workflow using a kind cluster and Helm to mirror the production chart structure.

## Structure
- `charts/backend/` – canonical Helm chart for the backend service used for all environments.
- `environments/local-kind/` – kind cluster configuration and values overrides for local smoke tests.
- `scripts/` – helper scripts for creating the kind cluster, rendering manifests, and deploying the chart.
- `manifests/` – rendered manifests and validation outputs generated by the scripts (kept out of version control via `.gitkeep`).

## Local orchestration (kind + Helm)
Use the `local_up.sh` script to lint the chart, render manifests, create the cluster, and deploy the backend release.

### Prerequisites
- Docker (for kind)
- kind
- kubectl
- Helm
- Optional: `kubeconform` for schema validation during rendering

### Usage
```bash
# From the repository root
deploy/backend/scripts/local_up.sh            # create cluster (if needed) and deploy
deploy/backend/scripts/local_up.sh down       # delete the kind cluster
```

Environment variables:
- `RELEASE_NAME` (default: `backend`) – Helm release name; also used for resource names via `fullnameOverride`.
- `NAMESPACE` (default: `backend-local`) – namespace for the local deployment.
- `KIND_CLUSTER_NAME` (default: `backend-local`) – kind cluster name used by the script.
- `KIND_IMAGE` or `KIND_IMAGE_ARCHIVE` – optionally load a locally built image into the cluster.

Rendered output is written to `manifests/local-kind/rendered.yaml` and can be fed into tooling such as `kubeconform` or `kube-linter`.
